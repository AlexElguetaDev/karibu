---
import Layout from '../layouts/Layout.astro';
import StoryblokClient from 'storyblok-js-client';

let name = import.meta.env.DEFAULT_NAME || 'Karibu';

try {
	const storyblok = new StoryblokClient({
		accessToken: import.meta.env.STORYBLOK_TOKEN,
	});
	
	const { data } = await storyblok.get('cdn/stories/karibu', {
		version: 'draft',
	});
	
	const storyblokName = data?.story?.content?.body?.[0]?.myname;
	if (storyblokName) {
		name = storyblokName;
	}
} catch (error) {
	console.error('Error fetching Storyblok data:', error);
}
---

<Layout>
	<main class="container">
		<div class="content">
			<h1 class="name">{name}</h1>
		</div>
	</main>
</Layout>

<style>
	.container {
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
		min-height: 100vh;
		margin: 0;
		padding: 2rem;
		box-sizing: border-box;
		background: #ffffff;
	}

	.content {
		text-align: center;
		max-width: 1200px;
		width: 100%;
	}

	.name {
		margin: 0;
		font-size: clamp(3rem, 8vw, 7rem);
		font-weight: 600;
		line-height: 1.1;
		letter-spacing: -0.04em;
		background: linear-gradient(180deg, #000000 0%, #666666 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		word-wrap: break-word;
		animation: fadeIn 0.6s ease-out;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (prefers-color-scheme: dark) {
		.container {
			background: #000000;
		}

		.name {
			background: linear-gradient(180deg, #ffffff 0%, #a0a0a0 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}
	}
</style>
